<ng-template *ngIf="getUser(); then userSection else guestSection"></ng-template>

<ng-template #userSection>
    <div>
        <h1 
        class="text-center card-text text-success font-monospace">
        Favorite Movies!</h1>

    </div>

    <div *ngIf="windowWidth() > 700" class="card border border-success p-2 mb-2">
        <div class="table-responsive">
            <table class="table align-middle col">
                <thead>
                    <tr class="text-warning">
                        <th scope="col-sm-10">Movie Poster</th>
                        <th scope="col-sm-10">Movie Name</th>
                        <th scope="col-sm-10">Synopsis</th>
                        <th scope="col-sm-10">Trailer</th>
                        <th scope="col-sm-10">Details</th>
                        <th scope="col-sm-10">Favorites</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let detail of favoriteMovies">
                        <td><img height="105px" width="105px" src={{detail.posterImageUrl}}></td>
                        <td>{{detail.name}} {{detail.EmsVersionId}}</td>
                        <td>
                            <p [innerHTML]="detail.synopsis | truncatePipe:[300, '...']"></p>
                        </td>

                        <td>
                            <button class="btn btn-outline-success" type="button"
                                (click)="openTrailer(detail.trailerUrl)"><i class="bi bi-film"></i> Trailer</button>
                        </td>

                        <td>
                            <a 
                            class="btn btn-outline-success" 
                            (click)="passEmsVersionId(detail.emsVersionId)"
                            routerLink="/movie-detail">
                            Movie Details 
                            <i class="bi bi-film"></i></a>
                        </td>
                        <td>
                            <button 
                            class="btn btn-success fav-btn" 
                            type="button"
                            (click)="removeFavorite(detail.emsVersionId)">
                            <i class="star2 bi bi-star-fill"></i>
                            Remove</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card col alert-success" *ngIf="windowWidth() <= 700" >
        <div class="col card m-4 alert-info" *ngFor="let detail of favoriteMovies">
            <label class="text-warning" >{{detail.name}} </label>
            
            <hr>
            <div class="row p-4">
                <button 
                class="m-1 col btn btn-outline-success" 
                type="button"
                (click)="openTrailer(detail.trailerUrl)">
                <i class="bi bi-film"></i> Trailer</button>
                <a 
                class="m-1 col btn btn-outline-success" 
                (click)="passEmsVersionId(detail.emsVersionId)"
                routerLink="/movie-detail">
                Movie Details 
                <i class="bi bi-film"></i></a>
                <button 
                class="m-1 col btn btn-success fav-btn" 
                type="button"
                (click)="removeFavorite(detail.emsVersionId)">
                <i class="star2 bi bi-star-fill"></i>
                Remove</button>
            </div>
            <hr>
            <div class="row" >
                <img class="poster col" src={{detail.posterImageUrl}}/>
                <div class="col">
                    <p class="text-success text-center">
                        {{detail.synopsis}}
                    </p>
                </div>
                
            </div>
            
        </div>
    </div>
    
    <!-- <div *ngIf="favoriteMovies.length > 5">
        <div *ngIf="startOfFavoriteMovies; then thenBlock else elseBlock">
        </div>
        <ng-template #thenBlock><button class="btn btn-outline-success" type="button"
                (click)="getNextSixFavoriteMovies(startFavoriteMovieIndex,endFavoriteMovieIndex)">More Movies <i
                    class="bi bi-chevron-right"></i></button>
        </ng-template>
        <ng-template #elseBlock>
            <button style="margin-right:20px" class="btn btn-outline-success" type="button"
                (click)="getLastSixFavoriteMovies(startFavoriteMovieIndex,endFavoriteMovieIndex)"><i
                    class="bi bi-chevron-left"></i> Previous Movies</button>
            <button class="btn btn-outline-success" type="button"
                (click)="getNextSixFavoriteMovies(startFavoriteMovieIndex,endFavoriteMovieIndex)">More
                Movies <i class="bi bi-chevron-right"></i></button>
            <button style="margin-left:20px" class="btn btn-outline-success" type="button"
                (click)="getFirstSixFavoriteMovies()"><i class="bi bi-chevron-double-left"></i> Back to
                Start</button>
        </ng-template>
    </div> -->
</ng-template>
<ng-template #guestSection>
    <br>
    <br>
    <h2>Registration required to view favorites.</h2>
</ng-template>